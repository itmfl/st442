<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Visualizing Data</title>
    <meta charset="utf-8" />
    <meta name="author" content="CSC 442/ST 442" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Visualizing Data
## An introduction to ggplot2
### CSC 442/ST 442
### Fall 2019

---






#ggplot2
We introduce the **ggplot2** package which provides a unifying framework and, correspondingly, a grammar for describing and specifying graphics. The use of a grammar allows for a coherent system for describing and building graphics using a number of simple and well-defined commands. A comprehensive description of **ggplot2** is available from [ggplot2: Elegant graphics for data analysis](https://catalog.lib.ncsu.edu/catalog/NCSU3716602) and [R Graphics Cookbook](https://r-graphics.org). 
---
As an example, the following figure was generated using data from the average daily temperature archive at the [University of Daytona](http://academic.udayton.edu/kissock/http/Weather/).

&lt;img src="intro_visualization_files/figure-html/unnamed-chunk-1-1.png" width="120%" style="display: block; margin: auto;" /&gt;
---
As another example, consider the following famous plot of Charles Minard on Napoleon's 1812 winter retreat from Moscow. During this excursion, the Grande Armee dropped from `\(422000\)` to `\(10000\)` troops.

![](https://www.andrewheiss.com/files/images/minard/Minard.png)&lt;!-- --&gt;
---
A **R** version generated by **ggplot2** code is below.

&lt;img src="intro_visualization_files/figure-html/unnamed-chunk-3-1.png" width="120%" /&gt;
Close, but no cigar ? In any case, the above plot is nice in that a total of six variables are mapped to six *aesthetics*; `\(x\)` and `\(y\)` axis mapped to the location of the army, the size of the army is mapped to the size of the line, the direction of movement is mapped to color, date of points along retreat path is mapped to the text below plot, and the temperature during the retreat is mapped to the line below the plot.
---
##ggplot2 grammar
We start with a very simple plot. Consider the following dataset about fuel efficieny for cars.


```r
library(ggplot2)
data(mpg)
select(mpg, -fl, -class)
```

```
## # A tibble: 234 x 9
##    manufacturer model      displ  year   cyl trans      drv     cty   hwy
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt;
##  1 audi         a4           1.8  1999     4 auto(l5)   f        18    29
##  2 audi         a4           1.8  1999     4 manual(m5) f        21    29
##  3 audi         a4           2    2008     4 manual(m6) f        20    31
##  4 audi         a4           2    2008     4 auto(av)   f        21    30
##  5 audi         a4           2.8  1999     6 auto(l5)   f        16    26
##  6 audi         a4           2.8  1999     6 manual(m5) f        18    26
##  7 audi         a4           3.1  2008     6 auto(av)   f        18    27
##  8 audi         a4 quattro   1.8  1999     4 manual(m5) 4        18    26
##  9 audi         a4 quattro   1.8  1999     4 auto(l5)   4        16    25
## 10 audi         a4 quattro   2    2008     4 manual(m6) 4        20    28
## # â€¦ with 224 more rows
```
---
We now plot a scatterplot of the relationship between engine size vs
mile per gallon for highway driving.


```r
p &lt;- ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
  xlab("Engine Size") + ylab("Highway mile per gallon")
p
```

&lt;img src="intro_visualization_files/figure-html/unnamed-chunk-5-1.png" width="100%" style="display: block; margin: auto;" /&gt;
---
We next color the cars based on its class (e.g., compact vs suv vs pickup)

```r
p &lt;- ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = class)) + 
  xlab("Engine Size") + ylab("Highway mile per gallon")
p
```

&lt;img src="intro_visualization_files/figure-html/unnamed-chunk-6-1.png" width="100%" style="display: block; margin: auto;" /&gt;
---
Compare the previous plot with the following two plots.

```r
p1 &lt;- ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, size = class))
p2 &lt;- ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, alpha = class))
require(gridExtra)
grid.arrange(p1,p2,ncol = 2)
```

&lt;img src="intro_visualization_files/figure-html/unnamed-chunk-7-1.png" width="120%" style="display: block; margin: auto;" /&gt;
---
We see that the plots differ in which aesthetic the variable *class* is mapped to, e.g., color vs size vs alpha translucency.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
